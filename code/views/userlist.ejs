<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="/js/jquery.js"></script>
    <script type = "text/javascript">

        function row_click_function(user_name){
            // var oReq = new XMLHttpRequest();
            // oReq.onreadystatechange=function() {
            //     if (this.readyState == 4 && this.status == 200) {
            //         alert("successful");
            //     }
            // };
            // oReq.open("GET", "http://localhost:3000/user/"+user_name);
            // oReq.send();
            $.get("http://localhost:3000/user/"+user_name, function(data, status){
                $("html").html(data);
            });

        }
    </script>
    <style>
        .center {
            text-align: center;
        }
    </style>
</head>
<body>
<div>
    <h1 class = center>user list from mongodb</h1>
    <table align="center" id = "usr_list_table" border="2">
        <tr>
            <th>
                User Name
            </th>
            <th>
                Password
            </th>
            <th>
                Last Name
            </th>
            <th>
                First Name
            </th>
        </tr>
        <%

        for(var i = 0;i<userlist.length;i++) {
            var name = userlist[i].user_name;
        %>
        <tr class = "target" onclick="row_click_function('<%=name%>')" name="<%=name%>">
            <td><%= name%></td>
            <td><%= userlist[i].password%></td>
            <td><%= userlist[i].last_name%></td>
            <td><%= userlist[i].first_name%></td>

        </tr>
        <%

        } %>
    </table>
    <p id = "console"></p>
</div>

</body>
</html>